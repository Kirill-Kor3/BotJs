require('dotenv').config();
const TelegramBot = require('node-telegram-bot-api');

const BOT_TOKEN = process.env.BOT_TOKEN;

if (!BOT_TOKEN) {
    console.error('‚ùå BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!');
    process.exit(1);
}

const bot = new TelegramBot(BOT_TOKEN, { polling: true });
console.log('ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...');

// –ë–ê–ó–ê –î–ê–ù–ù–´–• –ò–ó 20 –°–õ–û–í
const WORDS_DB = [
    {
        word: "–ö—Ä–∏–Ω–∂",
        options: ["–ß—Ç–æ-—Ç–æ –Ω–µ–ª–æ–≤–∫–æ–µ, —Å—Ç—ã–¥–Ω–æ–µ", "–ß—Ç–æ-—Ç–æ –æ—á–µ–Ω—å —Å–º–µ—à–Ω–æ–µ", "–°–ª–æ–∂–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è"],
        correctIndex: 0,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ö—Ä–∏–Ω–∂** ‚Äî —ç—Ç–æ —á—Ç–æ-—Ç–æ —Å—Ç—ã–¥–Ω–æ–µ, –≤—ã–∑—ã–≤–∞—é—â–µ–µ —á—É–≤—Å—Ç–≤–æ –Ω–µ–ª–æ–≤–∫–æ—Å—Ç–∏. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'cringe'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–≠—Ç–æ –≤–∏–¥–µ–æ —Ç–∞–∫–æ–π –∫—Ä–∏–Ω–∂!'"
    },
    {
        word: "–ß–∏–ª–ª",
        options: ["–ü–∞–Ω–∏–∫–∞, —Å—Ç—Ä–µ—Å—Å", "–°–ø–æ–∫–æ–π–Ω—ã–π –æ—Ç–¥—ã—Ö, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ", "–û–Ω–ª–∞–π–Ω-–∏–≥—Ä–∞"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ß–∏–ª–ª** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω–æ–µ, —Å–ø–æ–∫–æ–π–Ω–æ–µ –≤—Ä–µ–º—è–ø—Ä–µ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'chill'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–°–µ–≥–æ–¥–Ω—è –ø—Ä–æ—Å—Ç–æ —á–∏–ª–ª–∏–º'"
    },
    {
        word: "–†–æ—Ñ–ª",
        options: ["–®—É—Ç–∫–∞ / –ø—Ä–∏–∫–æ–ª", "–°–µ—Ä—å—ë–∑–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä", "–¢–∏–ø –æ—à–∏–±–∫–∏ –≤ –∏–≥—Ä–µ"],
        correctIndex: 0,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–†–æ—Ñ–ª** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ-—Ç–æ –æ—á–µ–Ω—å —Å–º–µ—à–Ω–æ–µ, —à—É—Ç–∫—É. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'ROFL'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–¢—ã –≤—á–µ—Ä–∞ –±—ã–ª –ø—Ä–æ—Å—Ç–æ —Ä–æ—Ñ–ª!'"
    },
    {
        word: "–§–ª–µ–∫—Å–∏—Ç—å",
        options: ["–•–≤–∞—Å—Ç–∞—Ç—å—Å—è", "–£—Å—Ç–∞–≤–∞—Ç—å", "–ü–ª–∞–∫–∞—Ç—å"],
        correctIndex: 0,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–§–ª–µ–∫—Å–∏—Ç—å** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç —Ö–≤–∞—Å—Ç–∞—Ç—å—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ–∏ —É—Å–ø–µ—Ö–∏. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'flex'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–û–Ω —Ñ–ª–µ–∫—Å–∏—Ç –Ω–æ–≤—ã–º–∏ –∫—Ä–æ—Å—Å–æ–≤–∫–∞–º–∏'"
    },
    {
        word: "–®–∏–ø–ø–µ—Ä–∏—Ç—å",
        options: ["–ü—É–≥–∞—Ç—å –∫–æ–≥–æ-—Ç–æ", "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –ø–∞—Ä—É", "–ë—ã—Ç—å –≤ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–®–∏–ø–ø–µ—Ä–∏—Ç—å** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'ship'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–Ø —à–∏–ø–ø–µ—Ä—é —ç—Ç–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π!'"
    },
    {
        word: "–•–µ–π—Ç–µ—Ä",
        options: ["–ü–æ–∫–ª–æ–Ω–Ω–∏–∫", "–¢–æ—Ç, –∫—Ç–æ –∫—Ä–∏—Ç–∏–∫—É–µ—Ç –∏ –Ω–µ–Ω–∞–≤–∏–¥–∏—Ç", "–î—Ä—É–≥"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–•–µ–π—Ç–µ—Ä** ‚Äî —ç—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—è–≤–ª—è–µ—Ç –Ω–µ–Ω–∞–≤–∏—Å—Ç—å. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'hate'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–ù–µ —Å–ª—É—à–∞–π —Ö–µ–π—Ç–µ—Ä–æ–≤'"
    },
    {
        word: "–ö—Ä–∞—à",
        options: ["–ü—Ä–æ–≤–∞–ª", "–ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω—Ä–∞–≤–∏—Ç—Å—è", "–£–¥–∞—Ä"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ö—Ä–∞—à** ‚Äî —ç—Ç–æ —á–µ–ª–æ–≤–µ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã –≤–ª—é–±–ª—ë–Ω. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'crush'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–£ –º–µ–Ω—è –Ω–æ–≤—ã–π –∫—Ä–∞—à!'"
    },
    {
        word: "–°–∞–º–æ–∫",
        options: ["–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–°–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∞", "–°–∞–º–æ–∫–∞—Ç"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–°–∞–º–æ–∫** ‚Äî —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ—Ç '—Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∞'. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* —Ä—É—Å—Å–∫–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–°–µ–≥–æ–¥–Ω—è –º–Ω–æ–≥–æ —Å–∞–º–æ–∫–∞'"
    },
    {
        word: "–•–∞–π–ø",
        options: ["–®—É–º, –∞–∂–∏–æ—Ç–∞–∂", "–¢–∏—à–∏–Ω–∞", "–í—ã—Å–æ–∫–∏–π –∑–≤—É–∫"],
        correctIndex: 0,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–•–∞–π–ø** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç —à—É–º, –∞–∂–∏–æ—Ç–∞–∂ –≤–æ–∫—Ä—É–≥ —á–µ–≥–æ-–ª–∏–±–æ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'hype'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–í–æ–∫—Ä—É–≥ –Ω–æ–≤–æ–≥–æ –∞–π—Ñ–æ–Ω–∞ —Ö–∞–π–ø!'"
    },
    {
        word: "–ë—É–ª–ª–∏–Ω–≥",
        options: ["–î—Ä—É–∂–±–∞", "–¢—Ä–∞–≤–ª—è, –∏–∑–¥–µ–≤–∞—Ç–µ–ª—å—Å—Ç–≤–∞", "–ò–≥—Ä–∞"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ë—É–ª–ª–∏–Ω–≥** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç —Ç—Ä–∞–≤–ª—é, –∏–∑–¥–µ–≤–∞—Ç–µ–ª—å—Å—Ç–≤–∞. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'bullying'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–í —à–∫–æ–ª–µ –Ω–µ–ª—å–∑—è –¥–æ–ø—É—Å–∫–∞—Ç—å –±—É–ª–ª–∏–Ω–≥'"
    },
    {
        word: "–ì–æ",
        options: ["–£—Ö–æ–¥–∏", "–ü–æ—à–ª–∏, –¥–∞–≤–∞–π", "–°—Ç–æ–π"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ì–æ** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç '–ø–æ—à–ª–∏', '–¥–∞–≤–∞–π'. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'go'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–ì–æ –≤ –∫–∏–Ω–æ!'"
    },
    {
        word: "–õ–æ–π—Å",
        options: ["–ù–µ–Ω–∞–≤–∏—Å—Ç—å", "–õ–∞–π–∫, –æ–¥–æ–±—Ä–µ–Ω–∏–µ", "–ü–µ—Å–Ω—è"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–õ–æ–π—Å** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –ª–∞–π–∫, –æ–¥–æ–±—Ä–µ–Ω–∏–µ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'like' + 'voice'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–°—Ç–∞–≤–ª—é –ª–æ–π—Å –∑–∞ –≤–∏–¥–æ—Å!'"
    },
    {
        word: "–í–∞–π–±",
        options: ["–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ", "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ", "–í–∏–±—Ä–∏—Ä–æ–≤–∞—Ç—å"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–í–∞–π–±** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'vibe'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–ó–¥–µ—Å—å —Ö–æ—Ä–æ—à–∏–π –≤–∞–π–±'"
    },
    {
        word: "–ö–∞–º–±—ç–∫",
        options: ["–£—Ö–æ–¥", "–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ", "–ü–∞–¥–µ–Ω–∏–µ"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ö–∞–º–±—ç–∫** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'comeback'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–ñ–¥—ë–º —Ç–≤–æ–π –∫”ô–º–±—ç–∫!'"
    },
    {
        word: "–°–∫–∏–ª–ª",
        options: ["–û—à–∏–±–∫–∞", "–ù–∞–≤—ã–∫, —É–º–µ–Ω–∏–µ", "–®–∫–æ–ª–∞"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–°–∫–∏–ª–ª** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞–≤—ã–∫, —É–º–µ–Ω–∏–µ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'skill'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–ü—Ä–æ–∫–∞—á–∞–π —Å–≤–æ–∏ —Å–∫–∏–ª–ª—ã!'"
    },
    {
        word: "–¢—Ä–µ—à",
        options: ["–ú—É—Å–æ—Ä, —á—Ç–æ-—Ç–æ –ø–ª–æ—Ö–æ–µ", "–°–æ–∫—Ä–æ–≤–∏—â–µ", "–°—Ç–∏–ª—å"],
        correctIndex: 0,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–¢—Ä–µ—à** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –º—É—Å–æ—Ä, —á—Ç–æ-—Ç–æ –ø–ª–æ—Ö–æ–µ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'trash'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–≠—Ç–æ—Ç —Ñ–∏–ª—å–º - –ø–æ–ª–Ω—ã–π —Ç—Ä–µ—à'"
    },
    {
        word: "–ó–∞—à–∫–≤–∞—Ä",
        options: ["–ú–æ–¥–Ω–æ", "–°—Ç—ã–¥–Ω–æ, –Ω–µ –º–æ–¥–Ω–æ", "–î–æ—Ä–æ–≥–æ"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ó–∞—à–∫–≤–∞—Ä** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ç—ã–¥–Ω–æ, –Ω–µ –º–æ–¥–Ω–æ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –∏–∑ —Ç—é—Ä–µ–º–Ω–æ–≥–æ –∂–∞—Ä–≥–æ–Ω–∞. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–≠—Ç–∏ –¥–∂–∏–Ω—Å—ã - –∑–∞—à–∫–≤–∞—Ä'"
    },
    {
        word: "–ü—Ä—É—Ñ",
        options: ["–õ–æ–∂—å", "–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ", "–í–æ–ø—Ä–æ—Å"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–ü—Ä—É—Ñ** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'proof'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–ì–¥–µ –ø—Ä—É—Ñ—ã?'"
    },
    {
        word: "–§–µ–π–∫",
        options: ["–ü—Ä–∞–≤–¥–∞", "–ü–æ–¥–¥–µ–ª–∫–∞, –æ–±–º–∞–Ω", "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–§–µ–π–∫** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥–¥–µ–ª–∫—É, –æ–±–º–∞–Ω. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'fake'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–≠—Ç–∞ –Ω–æ–≤–æ—Å—Ç—å - —Ñ–µ–π–∫'"
    },
    {
        word: "–•–∏–ø—Å—Ç–µ—Ä",
        options: ["–°–ø–æ—Ä—Ç—Å–º–µ–Ω", "–ú–æ–¥–Ω—ã–π —á–µ–ª–æ–≤–µ–∫, —Å–ª–µ–¥—è—â–∏–π –∑–∞ —Ç—Ä–µ–Ω–¥–∞–º–∏", "–£—á—ë–Ω—ã–π"],
        correctIndex: 1,
        explanation: "‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** \n\n**–•–∏–ø—Å—Ç–µ—Ä** ‚Äî –º–æ–¥–Ω—ã–π —á–µ–ª–æ–≤–µ–∫, —Å–ª–µ–¥—è—â–∏–π –∑–∞ —Ç—Ä–µ–Ω–¥–∞–º–∏. \n\nüìö *–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:* –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ 'hipster'. \n\nüí¨ *–ü—Ä–∏–º–µ—Ä:* '–û–Ω –Ω–∞—Å—Ç–æ—è—â–∏–π —Ö–∏–ø—Å—Ç–µ—Ä'"
    }
];

const userStates = new Map();

// –ö–æ–º–∞–Ω–¥–∞ /start
bot.onText(/\/start/, (msg) => {
    const chatId = msg.chat.id;
    const userName = msg.from.first_name;

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    userStates.set(chatId, {
        currentQuestion: 0,
        score: 0,
        totalQuestions: WORDS_DB.length
    });

    const welcomeText = `
–ü—Ä–∏–≤–µ—Ç, ${userName}! üëã

üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É "–£–≥–∞–¥–∞–π —Å–ª–µ–Ω–≥"!

–Ø –ø–æ–∫–∞–∂—É 20 —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤, –∞ —Ç—ã —É–≥–∞–¥–∞–µ—à—å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–µ.
–ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ —è –¥–∞–º –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ!

–î–∞–≤–∞–π –Ω–∞—á–Ω—ë–º! üöÄ
    `.trim();

    bot.sendMessage(chatId, welcomeText, { parse_mode: 'Markdown' })
        .then(() => {
            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –≤–æ–ø—Ä–æ—Å–æ–º
            setTimeout(() => sendQuestion(chatId), 1000);
        });
});

// –ö–æ–º–∞–Ω–¥–∞ /help
bot.onText(/\/help/, (msg) => {
    const chatId = msg.chat.id;
    
    const helpText = `
üéÆ –ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —Å–ª–µ–Ω–≥"

–£–≥–∞–¥–∞–π –∑–Ω–∞—á–µ–Ω–∏–µ 20 —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤!

–ö–æ–º–∞–Ω–¥—ã:
/start - –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É
/stop - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É
/help - –ø–æ–º–æ—â—å

üéØ –£–¥–∞—á–∏!
    `.trim();

    bot.sendMessage(chatId, helpText, { parse_mode: 'Markdown' });
});

// –ö–æ–º–∞–Ω–¥–∞ /stop
bot.onText(/\/stop/, (msg) => {
    const chatId = msg.chat.id;
    userStates.delete(chatId);
    
    bot.sendMessage(chatId, "üõë –ò–≥—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –ù–∞–ø–∏—à–∏ /start –¥–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã", {
        reply_markup: { remove_keyboard: true }
    });
});

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–∞
function sendQuestion(chatId) {
    const userState = userStates.get(chatId);
    
    if (!userState || userState.currentQuestion >= WORDS_DB.length) {
        finishGame(chatId);
        return;
    }

    const questionData = WORDS_DB[userState.currentQuestion];
    const questionNumber = userState.currentQuestion + 1;
    
    const questionText = `
üìù –í–æ–ø—Ä–æ—Å ${questionNumber}/20

üî§ –°–ª–æ–≤–æ: ${questionData.word}

–ß—Ç–æ –æ–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç?

üÖ∞Ô∏è ${questionData.options[0]}
üÖ±Ô∏è ${questionData.options[1]}
üÖ≤Ô∏è ${questionData.options[2]}

–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç ‚Üì
    `.trim();

    const keyboard = {
        reply_markup: {
            keyboard: [
                [{ text: 'A' }, { text: 'B' }, { text: 'C' }],
                [{ text: '/stop' }]
            ],
            resize_keyboard: true,
            one_time_keyboard: false
        }
    };

    bot.sendMessage(chatId, questionText, { 
        parse_mode: 'Markdown',
        ...keyboard
    });
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
bot.on('message', (msg) => {
    const chatId = msg.chat.id;
    const text = msg.text?.toUpperCase();
    
    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã
    if (text?.startsWith('/')) return;
    
    if (!['A', 'B', 'C'].includes(text)) {
        return;
    }
    
    const userState = userStates.get(chatId);
    if (!userState) {
        bot.sendMessage(chatId, '–ù–∞—á–Ω–∏ –∏–≥—Ä—É –∫–æ–º–∞–Ω–¥–æ–π /start');
        return;
    }

    const questionIndex = userState.currentQuestion;
    const questionData = WORDS_DB[questionIndex];
    
    const correctAnswer = ['A', 'B', 'C'][questionData.correctIndex];
    
    if (text === correctAnswer) {
        userState.score++;
        bot.sendMessage(chatId, "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ", { parse_mode: 'Markdown' });
    } else {
        bot.sendMessage(chatId, `‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctAnswer}`, { parse_mode: 'Markdown' });
    }
    
    // –û–±—ä—è—Å–Ω–µ–Ω–∏–µ
    bot.sendMessage(chatId, questionData.explanation, { parse_mode: 'Markdown' });
    
    // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
    userState.currentQuestion++;
    
    if (userState.currentQuestion < WORDS_DB.length) {
        setTimeout(() => {
            bot.sendMessage(chatId, "‚û°Ô∏è –°–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ...", { parse_mode: 'Markdown' });
            setTimeout(() => sendQuestion(chatId), 1000);
        }, 2000);
    } else {
        setTimeout(() => finishGame(chatId), 2000);
    }
});

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
function finishGame(chatId) {
    const userState = userStates.get(chatId);
    if (!userState) return;

    const score = userState.score;
    const total = userState.totalQuestions;
    const percentage = (score / total) * 100;

    let rating;
    if (percentage >= 90) {
        rating = "üèÜ –¢—ã –±–æ–≥ —Å–ª–µ–Ω–≥–∞! –ò–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!";
    } else if (percentage >= 70) {
        rating = "üéØ –û—Ç–ª–∏—á–Ω–æ! –¢—ã –≤ —Ç–µ–º–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤!";
    } else if (percentage >= 50) {
        rating = "üëç –•–æ—Ä–æ—à–æ! –¢—ã –Ω–µ–ø–ª–æ—Ö–æ —Ä–∞–∑–±–∏—Ä–∞–µ—à—å—Å—è –≤ —Å–ª–µ–Ω–≥–µ!";
    } else {
        rating = "üìö –ù–æ—Ä–º–∞–ª—å–Ω–æ! –¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å –±–æ–ª—å—à–µ —Å–ª–æ–≤!";
    }

    const resultsText = `
üèÅ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: ${score}/20
üìà –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${Math.round(percentage)}%

${rating}

üéÆ –•–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑? –ù–∞–ø–∏—à–∏ /start
    `.trim();

    bot.sendMessage(chatId, resultsText, {
        parse_mode: 'Markdown',
        reply_markup: { remove_keyboard: true }
    });

    userStates.delete(chatId);
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
bot.on('polling_error', (error) => {
    console.error('‚ùå –û—à–∏–±–∫–∞:', error);
});

console.log('‚úÖ –ë–æ—Ç —Å 20 —Å–ª–æ–≤–∞–º–∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');